<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>ref</title>
  </head>

  <body>
    <div id="app"></div>
    <script type="module">
      // è¿™æ˜¯åŽŸç”Ÿçš„
      // import {
      //   reactive,
      //   effect,
      //   ref,
      // } from '/node_modules/vue/dist/vue.esm-browser.js';

      // è¿™æ˜¯è‡ªå·±å®žçŽ°è°ƒè¯•ç”¨çš„
      import { reactive, effect, ref } from './reactivity.js';

      // lesson-12 refå®žçŽ°åŽŸç†
      // const flag = ref(false);
      // console.log('ðŸš€ ~ file: index.html ~ line 194 ~ flag', flag.value);
      // effect(() => {
      //   app.innerHTML = flag.value ? 'pb' : 30;
      // });
      // setTimeout(() => {
      //   flag.value = true;
      // }, 1000);
      // refå¯¹è±¡å†…éƒ¨ç»“æž„ä¼ªä»£ç ï¼š
      // let flag1 = {
      //   _v: false,
      //   get value() {
      //     // æ”¶é›†effect
      //     return this._v;
      //   },
      //   set value(newValue) {
      //     // æ›´æ–°effect
      //     this._v = newValue;
      //   },
      // };

      // lesson-13 toRef/toRefså®žçŽ°åŽŸç†
      // const state = reactive({ name: 'pb', age: 30 });
      // const nameRef = toRef(state, 'name'); // è¿˜æ˜¯åŸºäºŽProxyæ¥èŽ·å–
      // const ageRef = toRef(state, 'age');
      // console.log(nameRef.value); // é€šè¿‡state.valueæ¥èŽ·å–å€¼
      // console.log(ageRef.value);
      // let { name, age } = toRefs(state);
      // console.log(name, age);

      // æ¨¡æ¿ä¸­ï¼Œç›´æŽ¥ä½¿ç”¨å“åº”å¼å˜é‡ï¼Œä¸éœ€è¦æ·»åŠ .valueï¼Œå°±æ˜¯ä½¿ç”¨äº†è¿™ä¸ªAPI
      // let proxy = proxyRefs({ ...toRefs(state), a: 100 });
      // proxy.age = 100; // proxy.age.value = 100;
      // proxy.a = 200;
      // effect(() => {
      //   console.log(proxy.name, proxy.age, proxy.a);
      // });
    </script>
  </body>
</html>
