<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>runtime-dom</title>
</head>

<body>
  <div id="app"></div>
  <script type="module">
    import {
      // createRenderer,
      // render,
      // h,
      createVNode,
    } from '/node_modules/vue/dist/vue.runtime.esm-browser.js';

    import { renderOptions, render, h } from './runtime-dom.js';
    // console.log("ğŸš€ ~ createRenderer:", createRenderer, render, h)

    // 1. createRenderer æˆ‘ä»¬å¯ä»¥è‡ªå·±åˆ›å»ºæ¸²æŸ“å™¨
    // 2. render ç”¨å†…ç½®çš„æ¸²æŸ“å™¨æ¥è¿›è¡Œæ¸²æŸ“
    // 3. hæ–¹æ³•å¯ä»¥åˆ›å»ºä¸€ä¸ªè™šæ‹ŸDOM (type, propsOrChildren, children)

    // runtime-dom å®ƒçš„ä½œç”¨å°±æ˜¯æä¾›DOM APIï¼ˆæä¾›ä¸€ç³»åˆ—domæ“ä½œçš„apiæ–¹æ³•ï¼‰
    // runtime-dom -> @vue/runtime-core -> @vue/reactivity

    // lesson-21 hå‡½æ•°
    // å¯èƒ½æ˜¯ä¸€ä¸ªï¼ˆç±»å‹ï¼‰å‚æ•°ï¼Œå¯ä»¥æœ‰2ä¸ªï¼ˆç±»å‹ï¼Œå±æ€§/å„¿å­ï¼‰ï¼Œ3ä¸ªï¼ˆæ ‡å‡†çš„ï¼‰ï¼Œè¶…è¿‡3ä¸ªï¼ˆä»ç¬¬ä¸‰ä¸ªå¼€å§‹éƒ½æ˜¯å„¿å­ï¼‰
    // h(ç±»å‹, å±æ€§, å„¿å­)
    // h(ç±»å‹, å„¿å­)

    // ä¸¤ä¸ªå‚æ•°çš„æƒ…å†µ ç¬¬äºŒä¸ªå‚æ•°æ—¢å¯ä»¥æ˜¯å„¿å­ï¼ˆè™šæ‹ŸèŠ‚ç‚¹ï¼‰ä¹Ÿå¯ä»¥æ˜¯å±æ€§
    // 1. åˆ¤æ–­æ˜¯è™šæ‹ŸèŠ‚ç‚¹ï¼ˆé€šè¿‡è¿™ä¸ªå±æ€§ï¼š__v_isVnodeï¼‰=> å„¿å­
    // 2. ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸ªæ•°ç»„ => å„¿å­
    // 3. å…¶ä»–æƒ…å†µå°±æ˜¯å±æ€§
    // 4. ç›´æ¥ä¼ é€’éå¯¹è±¡çš„å€¼â€”â€”æ–‡æœ¬ => å„¿å­
    // 5. ä¸‰ä¸ªï¼ˆä»¥åŠä¸‰ä¸ªä»¥ä¸Šï¼‰å‚æ•°çš„æƒ…å†µï¼Œç¬¬äºŒä¸ªå‚æ•°åªèƒ½æ˜¯å±æ€§
    // 6. è¶…è¿‡ä¸‰ä¸ªå‚æ•°çš„æƒ…å†µï¼Œåé¢çš„éƒ½æ˜¯å„¿å­

    // const ele = h('div', { a: 1 });
    // const ele = h('div', h('div'));
    // const ele = h('div', [h('div'), h('a')]);
    // const ele = h('div', 'abc');
    // const ele = h('div', { a: 1 }, 'abc');
    // const ele = h('div', { a: 1 }, h('div'));
    // const ele = h(
    //   'div',
    //   { a: 1, style: { color: 'red' } },
    //   h('div', 'div1'),
    //   h('div', 'div2'),
    //   // h('div', 'child3')
    //   // createVNode å’Œ hå¯ä»¥äº’æ¢ï¼Œæºç ä¸­ç¼–è¯‘åçš„ç»“æœå…¨éƒ¨é‡‡ç”¨äº†createVNodeï¼Œæ–¹ä¾¿åšé¶å‘æ›´æ–°ã€‚jsxç¼–è¯‘åæ˜¯hå‡½æ•°
    //   createVNode('div', {}, 'child3')
    // );
    // // const ele = h('div', {}, 'a', 'b', 'c', 'd');
    // console.log('ğŸš€ ~ file: h-function.html ~ line 41 ~ ele', ele);


    // lesson-22 ä¸¤ä¸ªå…ƒç´ çš„æ¯”è¾ƒ
    // æƒ…å†µ1ï¼šç¬¬ä¸€æ¬¡æ™®é€švnodeï¼Œåä¸€æ¬¡null
    // renderç¬¬ä¸€ä¸ªå‚æ•°ï¼Œç¬¬ä¸€æ¬¡ä¼ äº†vnodeï¼Œåé¢ä¸€æ¬¡ä¼ äº†nullï¼Œè¿™ç§æƒ…å†µåº”è¯¥åˆ é™¤å¯¹åº”çš„domå…ƒç´ 
    // render(h('h1', 'hello'), app);
    // setTimeout(() => {
    //   render(null, app);
    // }, 3000)

    // æ™®é€šçš„æƒ…å†µ
    // ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æ˜¯æœ‰diffçš„ï¼Œçœ‹ä¸¤ä¸ªå…ƒç´ æ˜¯å¦æ˜¯åŒä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœæ˜¯å¤ç”¨
    // å¦‚æœä¸æ˜¯åŒä¸€ä¸ªå…ƒç´ ï¼Œåˆ é™¤è€çš„æ¢æ–°çš„
    // æƒ…å†µ2ï¼šç¬¬ä¸€æ¬¡æ˜¯å’Œåä¸€æ¬¡å…ƒç´ ä¸åŒï¼ˆç±»å‹æˆ–keyä¸åŒï¼‰
    // const vnode1 = h('h1', 'hello');
    // const vnode2 = h('div', 'world!');
    // æƒ…å†µ3ï¼šå‰åä¸¤æ¬¡å…ƒç´ ç›¸åŒï¼Œå±æ€§ä¸åŒï¼Œå¤ç”¨å…ƒç´ ï¼Œpatchå±æ€§
    const vnode1 = h('h1', { a: 1 }, 'hello');
    const vnode2 = h('h1', { style: { color: 'red' } }, 'world!');
    render(vnode1, app);
    setTimeout(() => {
      render(vnode2, app);
    }, 3000)

  </script>
</body>

</html>